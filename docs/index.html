<!DOCTYPE html>
<html>
<head>
	<title>Safari Bookmarklets: Installation</title>
	<style>
		pre {
			font-size: 0.5em;
			color: #999;
		}
	</style>
</head>
<body>
	<h1>Safari Bookmarklets: Installation</h1>
	<p>Repository: <a href="https://github.com/mafredri/safari-bookmarklets">github.com/mafredri/safari-bookmarklets</a></p>

	<p>Simply drag the link (bookmarklet) you want to you bookmarks (Favorites for easy access).</p>
	<ul>
<li id="godoc">
	<a href="javascript:(function(){
/**
 * GoDoc
 *
 * Navigates to GoDoc from the current repository, e.g. on GitHub.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
const%20re=/%5C/((tree%7Cblob%7Ccommits?%7Cissues%7Cpull%7Cgraphs%7Csettings%7Cnetwork)%5C/%5B%5E/%5D+%7C(issues%7Cpulls%7Cprojects%7Cwiki%7Cpulse%7Ccommunity%7Cnetwork%7Csettings)$)/,loc=window.location;window.location=%22https://godoc.org/%22+loc.hostname+loc.pathname.replace(re,%22%22);})();void(0);">GoDoc<a>: Navigates to GoDoc from the current repository, e.g. on GitHub.
	<pre>javascript:(function(){
/**
 * GoDoc
 *
 * Navigates to GoDoc from the current repository, e.g. on GitHub.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
const re=/\/((tree|blob|commits?|issues|pull|graphs|settings|network)\/[^/]+|(issues|pulls|projects|wiki|pulse|community|network|settings)$)/,loc=window.location
;window.location=&quot;https://godoc.org/&quot;+loc.hostname+loc.pathname.replace(re,&quot;&quot;);})();void(0);</pre>
</li>

<li id="google-translate-selection">
	<a href="javascript:(function(){
/**
 * Google Translate: Selection
 *
 * Translate only the selected text using automatic language detection.
 * Note: This is still a work-in-progress (WIP).
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.1
 */
async%20function%20main()%7Bconst%20e=document.getSelection(),t=e.getRangeAt(0),n=document.createTreeWalker(t.commonAncestorContainer,NodeFilter.SHOW_ALL);let%20o=%5B%5D;for(;n.nextNode();)%7Bconst%20t=n.currentNode;e.containsNode(t,!1)&&(o=%5B...o,t%5D)%7Dconst%20a=o.filter(e=%3Ee.nodeType===Node.TEXT_NODE&&%22%22!==e.nodeValue.trim()),s=a.map((e,t)=%3E%60$%7Be.nodeValue.trim()%7D%60).join(%22%5Cn%22),%5Br%5D=await%20translate(s);a.forEach((e,t)=%3E%7Be.nodeValue=r%5Bt%5D%5B0%5D%7D)%7Dfunction%20translate(e,t=%22en%22,n=%22auto%22)%7Bconst%20o=%60https://translate.googleapis.com/translate_a/single?client=gtx&sl=$%7Bn%7D&tl=$%7Bt%7D&dt=t&q=$%7Be=encodeURI(e.replace(/%5C%20/g,%22+%22))%7D%60;return%20new%20Promise((e,t)=%3E%7Bconst%20n=new%20XMLHttpRequest;n.onreadystatechange=function()%7Bif(4===n.readyState)%7Bif(200!==n.status)return%20void%20t(n.status);const%20o=JSON.parse(n.responseText);e(o)%7D%7D,n.open(%22GET%22,o,!0),n.send(null)%7D)%7Dmain();})();void(0);">Google Translate: Selection<a>: Translate only the selected text using automatic language detection. Note: This is still a work-in-progress (WIP).
	<pre>javascript:(function(){
/**
 * Google Translate: Selection
 *
 * Translate only the selected text using automatic language detection.
 * Note: This is still a work-in-progress (WIP).
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.1
 */
async function main(){
const e=document.getSelection(),t=e.getRangeAt(0),n=document.createTreeWalker(t.commonAncestorContainer,NodeFilter.SHOW_ALL)
;let o=[];for(;n.nextNode();){const t=n.currentNode;e.containsNode(t,!1)&amp;&amp;(o=[...o,t])}
const a=o.filter(e=&gt;e.nodeType===Node.TEXT_NODE&amp;&amp;&quot;&quot;!==e.nodeValue.trim()),s=a.map((e,t)=&gt;`${e.nodeValue.trim()}`).join(&quot;\n&quot;),[r]=await translate(s)
;a.forEach((e,t)=&gt;{e.nodeValue=r[t][0]})}function translate(e,t=&quot;en&quot;,n=&quot;auto&quot;){
const o=`https://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=${n}&amp;tl=${t}&amp;dt=t&amp;q=${e=encodeURI(e.replace(/\ /g,&quot;+&quot;))}`
;return new Promise((e,t)=&gt;{const n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){
if(200!==n.status)return void t(n.status);const o=JSON.parse(n.responseText);e(o)}},n.open(&quot;GET&quot;,o,!0),n.send(null)})}
main();})();void(0);</pre>
</li>

<li id="google-translate-toolbar">
	<a href="javascript:(function(){
/**
 * Google Translate: Toolbar
 *
 * Inject a Google Translate toolbar into the current page, allows
 * toggling translate on/off but might disrupt the page layout and
 * doesn't translate as well as the "Google Translate" bookmarklet.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.1
 */
const%20target=document.createElement(%22div%22);target.id=%22googleTranslateElement%22,document.body.append(target);const%20inject=document.createElement(%22script%22);function%20googleTranslateInit()%7Bconst%20e=new%20google.translate.TranslateElement(%7BpageLanguage:%22%22%7D,%22googleTranslateElement%22);console.log(e)%7Dinject.type=%22text/javascript%22,inject.src=%22http://translate.google.com/translate_a/element.js?cb=googleTranslateInit%22,window.googleTranslateInit=googleTranslateInit,document.head.append(inject);})();void(0);">Google Translate: Toolbar<a>: Inject a Google Translate toolbar into the current page, allows toggling translate on/off but might disrupt the page layout and doesn't translate as well as the "Google Translate" bookmarklet.
	<pre>javascript:(function(){
/**
 * Google Translate: Toolbar
 *
 * Inject a Google Translate toolbar into the current page, allows
 * toggling translate on/off but might disrupt the page layout and
 * doesn&#39;t translate as well as the &quot;Google Translate&quot; bookmarklet.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.1
 */
const target=document.createElement(&quot;div&quot;);target.id=&quot;googleTranslateElement&quot;,document.body.append(target)
;const inject=document.createElement(&quot;script&quot;);function googleTranslateInit(){
const e=new google.translate.TranslateElement({pageLanguage:&quot;&quot;},&quot;googleTranslateElement&quot;);console.log(e)}
inject.type=&quot;text/javascript&quot;,inject.src=&quot;http://translate.google.com/translate_a/element.js?cb=googleTranslateInit&quot;,
window.googleTranslateInit=googleTranslateInit,document.head.append(inject);})();void(0);</pre>
</li>

<li id="google-translate">
	<a href="javascript:(function(){
/**
 * Google Translate
 *
 * Translates the current page using automatic language detection. When
 * clicked on a translated page, will return to the original.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
function%20translate()%7Bconst%20t=%22https://translate.google.com/translate?sl=auto&tl=en&js=y&prev=_t&hl=en&ie=UTF-8&edit-text=&u=%22+encodeURIComponent(window.location.href);window.location=t%7Dfunction%20untranslate()%7Blet%20t=window.location.search.split(%22&%22).filter(t=%3Et.startsWith(%22u=%22))%5B0%5D.slice(2);t=decodeURIComponent(t),window.location=t%7Dwindow.location.origin.includes(%22://translate.google.com%22)?untranslate():translate();})();void(0);">Google Translate<a>: Translates the current page using automatic language detection. When clicked on a translated page, will return to the original.
	<pre>javascript:(function(){
/**
 * Google Translate
 *
 * Translates the current page using automatic language detection. When
 * clicked on a translated page, will return to the original.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
function translate(){
const t=&quot;https://translate.google.com/translate?sl=auto&amp;tl=en&amp;js=y&amp;prev=_t&amp;hl=en&amp;ie=UTF-8&amp;edit-text=&amp;u=&quot;+encodeURIComponent(window.location.href)
;window.location=t}function untranslate(){
let t=window.location.search.split(&quot;&amp;&quot;).filter(t=&gt;t.startsWith(&quot;u=&quot;))[0].slice(2);t=decodeURIComponent(t),
window.location=t}window.location.origin.includes(&quot;://translate.google.com&quot;)?untranslate():translate();})();void(0);</pre>
</li>

<li id="pinboard-add">
	<a href="javascript:(function(){
/**
 * Add to Pinboard
 *
 * Open a popup to bookmark the current page in Pinboard, information is
 * extracted from meta-tags where possible and some smarts are used for
 * constructing the title and description. If the document defines
 * keywords, tags will be pre-populated as well.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.1
 */
const%20url=firstNonEmpty(metaP(%22og:url%22),metaP(%22al:web:url%22),location.href);let%20title=firstNonEmpty(metaID(%22title%22),metaP(%22title%22),metaP(%22og:title%22),metaP(%22twitter:title%22),query(%22h1%22,%22innerText%22),query(%22title%22,%22innerText%22)),description=firstNonEmpty(metaID(%22description%22),metaP(%22description%22),metaP(%22og:description%22),metaP(%22twitter:description%22),metaN(%22description%22));description&&(description=%60Description:%20$%7Bquote(description)%7D%60);let%20tags=%5B%5D,keywords=firstNonEmpty(metaN(%22keywords%22));keywords&&(tags=keywords.split(%22,%22).map(t=%3Et.trim()).filter(t=%3E%22%22!==t));const%20author=firstNonEmpty(metaID(%22author%22),metaN(%22author%22)),siteName=firstNonEmpty(metaP(%22og:site_name%22));author&&!title.includes(author)?title+=%60%20%7C%20$%7Bauthor%7D%60:siteName&&!title.includes(siteName)&&(title+=%60%20%7C%20$%7BsiteName%7D%60);let%20sel=document.getSelection().toString();%22%22!==sel&&(sel=%60Excerpt:%20$%7Bquote(sel)%7D%60),description&&sel?description=%60$%7Bdescription%7D%5Cn$%7Bsel%7D%60:sel&&(description=sel);const%20queryParams=%5B%5B%22url%22,url%5D,%5B%22title%22,title%5D,%5B%22description%22,description%5D,%5B%22tags%22,tags.join(%22,%22)%5D%5D.map(t=%3E%60$%7Bt%5B0%5D%7D=$%7BencodeURIComponent(t%5B1%5D)%7D%60).join(%22&%22);function%20firstNonEmpty(...t)%7Bconst%5Be%5D=t.map(t=%3Et.trim()).filter(t=%3E%22%22!==t);return%20e%7C%7C%22%22%7Dfunction%20query(t,e)%7Bconst%20i=document.querySelector(t);return%20i?i%5Be%5D:%22%22%7Dfunction%20metaID(t)%7Breturn%20query(%60meta#$%7Bt%7D%60,%22content%22)%7Dfunction%20metaN(t)%7Breturn%20query(%60meta%5Bname=%22$%7Bt%7D%22%5D%60,%22content%22)%7Dfunction%20metaP(t)%7Blet%20e=query(%60meta%5Bproperty=%22$%7Bt%7D%22%5D%60,%22content%22);return%20e%7C%7C(e=query(%60meta%5Bitemprop=%22$%7Bt%7D%22%5D%60,%22content%22)),e%7Dfunction%20quote(t)%7Breturn%60%3Cblockquote%3E$%7Bt.trim()%7D%3C/blockquote%3E%60%7Dopen(%60https://pinboard.in/add?showtags=yes&$%7BqueryParams%7D%60,%22Pinboard%22,%22toolbar=no,scrollbars=yes,width=750,height=700%22);})();void(0);">Add to Pinboard<a>: Open a popup to bookmark the current page in Pinboard, information is extracted from meta-tags where possible and some smarts are used for constructing the title and description. If the document defines keywords, tags will be pre-populated as well.
	<pre>javascript:(function(){
/**
 * Add to Pinboard
 *
 * Open a popup to bookmark the current page in Pinboard, information is
 * extracted from meta-tags where possible and some smarts are used for
 * constructing the title and description. If the document defines
 * keywords, tags will be pre-populated as well.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.1
 */
const url=firstNonEmpty(metaP(&quot;og:url&quot;),metaP(&quot;al:web:url&quot;),location.href)
;let title=firstNonEmpty(metaID(&quot;title&quot;),metaP(&quot;title&quot;),metaP(&quot;og:title&quot;),metaP(&quot;twitter:title&quot;),query(&quot;h1&quot;,&quot;innerText&quot;),query(&quot;title&quot;,&quot;innerText&quot;)),description=firstNonEmpty(metaID(&quot;description&quot;),metaP(&quot;description&quot;),metaP(&quot;og:description&quot;),metaP(&quot;twitter:description&quot;),metaN(&quot;description&quot;))
;description&amp;&amp;(description=`Description: ${quote(description)}`);let tags=[],keywords=firstNonEmpty(metaN(&quot;keywords&quot;))
;keywords&amp;&amp;(tags=keywords.split(&quot;,&quot;).map(t=&gt;t.trim()).filter(t=&gt;&quot;&quot;!==t))
;const author=firstNonEmpty(metaID(&quot;author&quot;),metaN(&quot;author&quot;)),siteName=firstNonEmpty(metaP(&quot;og:site_name&quot;))
;author&amp;&amp;!title.includes(author)?title+=` | ${author}`:siteName&amp;&amp;!title.includes(siteName)&amp;&amp;(title+=` | ${siteName}`)
;let sel=document.getSelection().toString();&quot;&quot;!==sel&amp;&amp;(sel=`Excerpt: ${quote(sel)}`),
description&amp;&amp;sel?description=`${description}\n${sel}`:sel&amp;&amp;(description=sel)
;const queryParams=[[&quot;url&quot;,url],[&quot;title&quot;,title],[&quot;description&quot;,description],[&quot;tags&quot;,tags.join(&quot;,&quot;)]].map(t=&gt;`${t[0]}=${encodeURIComponent(t[1])}`).join(&quot;&amp;&quot;)
;function firstNonEmpty(...t){const[e]=t.map(t=&gt;t.trim()).filter(t=&gt;&quot;&quot;!==t);return e||&quot;&quot;}function query(t,e){
const i=document.querySelector(t);return i?i[e]:&quot;&quot;}function metaID(t){return query(`meta#${t}`,&quot;content&quot;)}
function metaN(t){return query(`meta[name=&quot;${t}&quot;]`,&quot;content&quot;)}function metaP(t){
let e=query(`meta[property=&quot;${t}&quot;]`,&quot;content&quot;);return e||(e=query(`meta[itemprop=&quot;${t}&quot;]`,&quot;content&quot;)),e}
function quote(t){return`&lt;blockquote&gt;${t.trim()}&lt;/blockquote&gt;`}
open(`https://pinboard.in/add?showtags=yes&amp;${queryParams}`,&quot;Pinboard&quot;,&quot;toolbar=no,scrollbars=yes,width=750,height=700&quot;);})();void(0);</pre>
</li>

<li id="spotify-to-apple-music">
	<a href="javascript:(function(){
/**
 * Spotify to Apple Music
 *
 * Searches Apple Music for the song or album being viewed on Spotify.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
async%20function%20main()%7Bconst%5Bt,e,n%5D=%5B%22twitter:title%22,%22twitter:audio:artist_name%22,%22og:type%22%5D.map(t=%3Edocument.querySelector(%60meta%5Bproperty=%22$%7Bt%7D%22%5D%60).content);%22music.song%22===n?entity=%22song%22:%22music.album%22===n?entity=%22album%22:alert(%60Unknown%20type:%20$%7Bn%7D%60);let%20r=%60$%7Bt%7D%20$%7Be%7D%60,a=await%20search(r);a%7C%7C(r=r.replace(/%5C(%5B%5E)%5D+%5C)/g,%22%22),a=await%20search(r)),render(a)%7Dfunction%20search(t)%7Bconst%20e=%60https://itunes.apple.com/search?term=$%7Bt=encodeURI(t.replace(/%5C%20/g,%22+%22))%7D&media=music&entity=$%7Bentity%7D%60;return%20new%20Promise((t,n)=%3E%7Bconst%20r=new%20XMLHttpRequest;r.onreadystatechange=function()%7Bif(4===r.readyState)%7Bif(200!==r.status)return%20void%20n(r.status);const%20e=JSON.parse(r.responseText);e.resultCount%7C%7Ct(null),t(e.results)%7D%7D,r.open(%22GET%22,e,!0),r.send(null)%7D)%7Dfunction%20render(t)%7Blet%20e=%5B%5D;for(let%20n%20of%20t)e=%5B...e,%60%3Cp%3E%3Ca%20href=%22$%7Bn.collectionViewUrl%7D%22%3E%3Cimg%20src=%22$%7Bn.artworkUrl100%7D%22%3E$%7Bn.collectionName%7D%20-%20$%7Bn.artistName%7D%3C/a%3E%3C/p%3E%60%5D;document.write(e.join(%22%22))%7Dmain();})();void(0);">Spotify to Apple Music<a>: Searches Apple Music for the song or album being viewed on Spotify.
	<pre>javascript:(function(){
/**
 * Spotify to Apple Music
 *
 * Searches Apple Music for the song or album being viewed on Spotify.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
async function main(){
const[t,e,n]=[&quot;twitter:title&quot;,&quot;twitter:audio:artist_name&quot;,&quot;og:type&quot;].map(t=&gt;document.querySelector(`meta[property=&quot;${t}&quot;]`).content)
;&quot;music.song&quot;===n?entity=&quot;song&quot;:&quot;music.album&quot;===n?entity=&quot;album&quot;:alert(`Unknown type: ${n}`)
;let r=`${t} ${e}`,a=await search(r);a||(r=r.replace(/\([^)]+\)/g,&quot;&quot;),a=await search(r)),render(a)}function search(t){
const e=`https://itunes.apple.com/search?term=${t=encodeURI(t.replace(/\ /g,&quot;+&quot;))}&amp;media=music&amp;entity=${entity}`
;return new Promise((t,n)=&gt;{const r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){
if(200!==r.status)return void n(r.status);const e=JSON.parse(r.responseText);e.resultCount||t(null),t(e.results)}},
r.open(&quot;GET&quot;,e,!0),r.send(null)})}function render(t){let e=[]
;for(let n of t)e=[...e,`&lt;p&gt;&lt;a href=&quot;${n.collectionViewUrl}&quot;&gt;&lt;img src=&quot;${n.artworkUrl100}&quot;&gt;${n.collectionName} - ${n.artistName}&lt;/a&gt;&lt;/p&gt;`]
;document.write(e.join(&quot;&quot;))}main();})();void(0);</pre>
</li>

<li id="wayback-machine">
	<a href="javascript:(function(){
/**
 * Wayback Machine
 *
 * Opens the latest snapshot of the current URL from Internet Archive.
 * Clicking the bookmarklet while viewing an archive redirects to the
 * live page.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
let%20loc=window.location.href;function%20showArchive(o)%7Bo=encodeURI(o),window.location=%60http://web.archive.org/web/submit?type=replay&url=$%7Bo%7D%60%7Dfunction%20showLive(o)%7B(o=o.split(%22/%22).slice(5).join(%22/%22)).startsWith(%22http%22)%7C%7C(o=%22http://%22+o),window.location=o%7D%22safari-resource:/ErrorPage.html%22===loc&&(loc=document.querySelector(%22.error-message%22).textContent.split(%22%E2%80%9C%E2%80%8E%22)%5B1%5D.split(%22%E2%80%9D%22)%5B0%5D),loc.includes(%22://web.archive.org/web/%22)?showLive(loc):showArchive(loc);})();void(0);">Wayback Machine<a>: Opens the latest snapshot of the current URL from Internet Archive. Clicking the bookmarklet while viewing an archive redirects to the live page.
	<pre>javascript:(function(){
/**
 * Wayback Machine
 *
 * Opens the latest snapshot of the current URL from Internet Archive.
 * Clicking the bookmarklet while viewing an archive redirects to the
 * live page.
 *
 * Author: Mathias Fredriksson
 * Version: 0.0.0
 */
let loc=window.location.href;function showArchive(o){
o=encodeURI(o),window.location=`http://web.archive.org/web/submit?type=replay&amp;url=${o}`}function showLive(o){
(o=o.split(&quot;/&quot;).slice(5).join(&quot;/&quot;)).startsWith(&quot;http&quot;)||(o=&quot;http://&quot;+o),window.location=o}
&quot;safari-resource:/ErrorPage.html&quot;===loc&amp;&amp;(loc=document.querySelector(&quot;.error-message&quot;).textContent.split(&quot;“‎&quot;)[1].split(&quot;”&quot;)[0]),
loc.includes(&quot;://web.archive.org/web/&quot;)?showLive(loc):showArchive(loc);})();void(0);</pre>
</li>

	</ul>
</body>
</html>
